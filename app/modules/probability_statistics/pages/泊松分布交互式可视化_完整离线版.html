<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>泊松分布交互式可视化 - 离线版</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            startup: {
                ready: function () {
                    MathJax.startup.defaultReady();
                    console.log('MathJax is ready!');
                }
            }
        };
    </script>
   <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            display: flex;
        }

        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 2px 0 15px rgba(0,0,0,0.1);
            padding: 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .sidebar-title {
            font-size: 1.6em;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 15px;
        }

        .nav-item {
            display: block;
            padding: 12px 15px;
            margin: 8px 0;
            color: #4a5568;
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s;
            font-weight: 500;
            border-left: 4px solid transparent;
            cursor: pointer;
        }

        .nav-item:hover {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: translateX(5px);
            border-left-color: #667eea;
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-left-color: #667eea;
        }

        .page-content {
            margin-left: 280px;
            flex: 1;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .main-panel {
            padding: 30px;
        }

        .definition-section {
            background: #f8fafc;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .definition-section h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .formula-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .formula-container h4 {
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .formula {
            font-size: 1.2em;
            text-align: left;
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
            margin: 10px 0;
        }

        .statistics-blocks {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
            padding: 20px;
            background: rgba(248, 249, 250, 0.8);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .stat-block {
            padding: 12px 16px;
            border-radius: 8px;
            text-align: left;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: flex-start;
            min-height: 50px;
        }

        .stat-block:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .stat-block.expectation {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border: 2px solid #ef4444;
            color: #991b1b;
        }

        .stat-block.variance {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            border: 2px solid #22c55e;
            color: #166534;
        }

        .stat-block.std-deviation {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            border: 2px solid #3b82f6;
            color: #1e40af;
        }

        .stat-label {
            font-size: 0.95em;
            font-weight: bold;
            margin-right: 8px;
            text-align: left;
        }

        .stat-formula {
            font-family: 'Times New Roman', serif;
            font-size: 1.3em;
            text-align: left;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 6px;
            backdrop-filter: blur(10px);
        }

        .controls-section {
            background: #f8fafc;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .controls-section h3 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .control-group {
            margin-bottom: 25px;
        }

        .control-group h4 {
            color: #4a5568;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .slider-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-weight: 600;
            color: #2d3748;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e2e8f0;
            outline: none;
            -webkit-appearance: none;
            margin-bottom: 15px;
        }

        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .preset-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .preset-btn {
            padding: 8px 16px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 500;
            transition: all 0.3s;
        }

        .preset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .stats-section {
            background: #f8fafc;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .stats-section h3 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-label {
            font-size: 1.1em;
            color: #718096;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2d3748;
        }

        .charts-section {
            margin-bottom: 30px;
        }

        .charts-section.two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .chart-container h3 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.3em;
            text-align: center;
        }

        .chart-placeholder {
            min-height: 400px;
            border-radius: 10px;
        }

        .comparison-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .comparison-section h3 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.3em;
            text-align: center;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
        }

        .comparison-table th {
            background: #f7fafc;
            font-weight: 600;
            color: #2d3748;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            
            .page-content {
                margin-left: 0;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h3 class="sidebar-title">概率论与数理统计</h3>
        <div class="nav-item" onclick="window.location.href='../index.html'">模块概览</div>
        <div class="nav-item" onclick="window.location.href='二项分布现代化可视化_离线版.html'">二项分布</div>
        <div class="nav-item active" onclick="window.location.href='泊松分布交互式可视化_完整离线版.html'">泊松分布</div>
        <div class="nav-item" onclick="window.location.href='指数分布交互式可视化.html'">指数分布</div>
        <div class="nav-item" onclick="window.location.href='正态分布交互式可视化.html'">正态分布</div>
        <div class="nav-item" onclick="window.location.href='../index.html'">返回 “概率与统计可视化世界”首页</div>
<div class="nav-item" onclick="window.location.href='../../../../index.html'">返回 “万物可视化”首页</div>
    </div>
    
    <div class="page-content">
        <div class="container">
            <div class="header">
                <h1>📊 泊松分布交互式可视化</h1>
            </div>
            
            <div class="main-panel">
                <!-- 分布说明 -->
                <div class="distribution-description" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; margin: 20px 0; text-align: center; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                    <h2 style="margin: 0; font-size: 1.5em;">📊 泊松分布 - 描述固定时间或空间内稀有事件发生次数的离散概率分布</h2>
                </div>
                
                <div class="definition-section">
                    <div class="definition-content">
                        
                        <div style="background: #e8f4fd; padding: 12px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #2196F3;">
                            <h4 style="color: #1976D2; margin-bottom: 8px;">🎯 适用场景</h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; color: #424242;">
                                <div>
                                    <strong>业务运营：</strong><br>
                                    • 交通流量：单位时间内通过路口的车辆数<br>
                                    • 客户到达：商店、银行单位时间内的客户数<br>
                                    • 电话呼叫：呼叫中心单位时间内的来电数
                                </div>
                                <div>
                                    <strong>技术应用：</strong><br>
                                    • 网站访问：网站单位时间内的访问次数<br>
                                    • 质量缺陷：生产线上单位产品的缺陷数<br>
                                    • 自然现象：地震、流星等罕见事件的发生次数
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                            <div class="formula-container">
                                <h4>概率质量函数 (PMF)：</h4>
                                <div class="formula">
                                    $$P(X = k) = \frac{\lambda^k e^{-\lambda}}{k!}, \quad k = 0, 1, 2, \ldots$$
                                </div>
                            </div>
                            
                            <div class="formula-container">
                                <h4>累积分布函数 (CDF)：</h4>
                                <div class="formula">
                                    $$F(k) = P(X \leq k) = \sum_{i=0}^{k} \frac{\lambda^i e^{-\lambda}}{i!}$$
                                </div>
                            </div>
                        </div>
                        
                        <div class="formula-container">
                            <h4>参数：</h4>
                            <div class="parameters-info" style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0;">
                                <ul style="margin: 0; padding-left: 20px; list-style-type: none;">
                                    <li style="margin: 8px 0;"><strong>$\lambda$ (lambda)：</strong>平均发生率参数（$\lambda > 0$）- 表示单位时间或空间内事件的平均发生次数</li>
                                    <li style="margin: 8px 0;"><strong>$k$：</strong>事件发生次数（$k = 0, 1, 2, ...$）- 表示实际观测到的事件发生次数</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="formula-container">
                            <h4>统计特性：</h4>
                            <div class="statistics-blocks">
                                <div class="stat-block expectation">
                                    <div class="stat-label"><strong>期望值：</strong></div>
                                    <div class="stat-formula">$$E(X) = \lambda$$</div>
                                </div>
                                <div class="stat-block variance">
                                    <div class="stat-label"><strong>方差：</strong></div>
                                    <div class="stat-formula">$$\text{Var}(X) = \lambda$$</div>
                                </div>
                                <div class="stat-block std-deviation">
                                    <div class="stat-label"><strong>标准差：</strong></div>
                                    <div class="stat-formula">$$\sigma = \sqrt{\lambda}$$</div>
                                </div>
                            </div>
                        </div>
                        

                    </div>
                </div>

                <div class="controls-section">
                    <h3>🎛️ 参数控制</h3>
                    <div class="control-group">
                        <h4>📈 平均发生率 λ</h4>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>λ = <span id="lambdaValue">3.0</span></span>
                                <span>范围: 0.1 - 20.0</span>
                            </div>
                            <input type="range" id="lambdaSlider" class="slider" min="0.1" max="20" step="0.1" value="3.0">
                            <div class="preset-buttons">
                                <button class="preset-btn" onclick="setLambda(0.5)">λ=0.5</button>
                                <button class="preset-btn" onclick="setLambda(1.0)">λ=1.0</button>
                                <button class="preset-btn" onclick="setLambda(3.0)">λ=3.0</button>
                                <button class="preset-btn" onclick="setLambda(5.0)">λ=5.0</button>
                                <button class="preset-btn" onclick="setLambda(10.0)">λ=10.0</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="stats-section">
                    <h3>📊 当前分布统计信息</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">期望值 E(X)</div>
                            <div class="stat-value" id="meanValue">3.00</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">方差 Var(X)</div>
                            <div class="stat-value" id="varianceValue">3.00</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">标准差 σ</div>
                            <div class="stat-value" id="stdValue">1.73</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">众数 Mode</div>
                            <div class="stat-value" id="modeValue">3</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">偏度 Skewness</div>
                            <div class="stat-value" id="skewnessValue">0.577</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">峰度 Kurtosis</div>
                            <div class="stat-value" id="kurtosisValue">3.333</div>
                        </div>
                    </div>
                </div>

                <div class="charts-section two-column">
                    <div class="chart-container">
                        <h3>📈 概率质量函数 (PMF)</h3>
                        <div id="pmfChart" class="chart-placeholder"></div>
                    </div>
                    
                    <div class="chart-container">
                        <h3>📊 累积分布函数 (CDF)</h3>
                        <div id="cdfChart" class="chart-placeholder"></div>
                    </div>
                </div>

                <div class="charts-section two-column">
                    <div class="chart-container">
                        <h3>🔄 不同 λ 值的 PMF 对比</h3>
                        <div id="pmfComparisonChart" class="chart-placeholder"></div>
                    </div>
                    
                    <div class="chart-container">
                        <h3>🔄 不同 λ 值的 CDF 对比</h3>
                        <div id="cdfComparisonChart" class="chart-placeholder"></div>
                    </div>
                </div>

                <div class="comparison-section">
                    <h3>📋 不同 λ 值统计对比</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>λ 值</th>
                                <th>期望值</th>
                                <th>方差</th>
                                <th>标准差</th>
                                <th>众数</th>
                                <th>偏度</th>
                            </tr>
                        </thead>
                        <tbody id="comparisonTableBody">
                            <!-- 动态生成内容 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 全局变量
        let currentLambda = 3.0;

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            updateVisualization();
            setupEventListeners();
        });

        // 设置事件监听器
        function setupEventListeners() {
            const lambdaSlider = document.getElementById('lambdaSlider');
            lambdaSlider.addEventListener('input', function() {
                currentLambda = parseFloat(this.value);
                updateVisualization();
            });
        }

        // 设置 lambda 值
        function setLambda(value) {
            currentLambda = value;
            document.getElementById('lambdaSlider').value = value;
            updateVisualization();
        }

        // 更新可视化
        function updateVisualization() {
            updateDisplay();
            updateStatistics();
            updateCharts();
            updateComparisonTable();
        }

        // 更新显示值
        function updateDisplay() {
            document.getElementById('lambdaValue').textContent = currentLambda.toFixed(1);
        }

        // 计算泊松分布PMF
        function poissonPMF(k, lambda) {
            if (k < 0) return 0;
            return Math.pow(lambda, k) * Math.exp(-lambda) / factorial(k);
        }

        // 计算阶乘
        function factorial(n) {
            if (n <= 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }

        // 计算泊松分布CDF
        function poissonCDF(k, lambda) {
            let sum = 0;
            for (let i = 0; i <= k; i++) {
                sum += poissonPMF(i, lambda);
            }
            return sum;
        }

        // 更新统计信息
        function updateStatistics() {
            const mean = currentLambda;
            const variance = currentLambda;
            const std = Math.sqrt(variance);
            const mode = Math.floor(currentLambda);
            const skewness = 1 / Math.sqrt(currentLambda);
            const kurtosis = 3 + 1 / currentLambda;

            document.getElementById('meanValue').textContent = mean.toFixed(2);
            document.getElementById('varianceValue').textContent = variance.toFixed(2);
            document.getElementById('stdValue').textContent = std.toFixed(2);
            document.getElementById('modeValue').textContent = mode.toString();
            document.getElementById('skewnessValue').textContent = skewness.toFixed(3);
            document.getElementById('kurtosisValue').textContent = kurtosis.toFixed(3);
        }

        // 更新图表
        function updateCharts() {
            updatePMFChart();
            updateCDFChart();
            updateComparisonCharts();
        }

        // 更新PMF图表
        function updatePMFChart() {
            const maxK = Math.max(20, Math.ceil(currentLambda + 4 * Math.sqrt(currentLambda)));
            const k_values = Array.from({length: maxK + 1}, (_, i) => i);
            const pmf_values = k_values.map(k => poissonPMF(k, currentLambda));

            const trace = {
                x: k_values,
                y: pmf_values,
                type: 'bar',
                name: `λ = ${currentLambda}`,
                marker: {
                    color: 'rgba(102, 126, 234, 0.8)',
                    line: {
                        color: 'rgba(102, 126, 234, 1)',
                        width: 1
                    }
                }
            };

            const layout = {
                title: {
                    text: `泊松分布 PMF (λ = ${currentLambda})`,
                    font: { size: 16 }
                },
                xaxis: {
                    title: 'k (事件发生次数)',
                    showgrid: true,
                    gridcolor: 'rgba(0,0,0,0.1)'
                },
                yaxis: {
                    title: 'P(X = k)',
                    showgrid: true,
                    gridcolor: 'rgba(0,0,0,0.1)'
                },
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                font: { family: 'Segoe UI, sans-serif' }
            };

            Plotly.newPlot('pmfChart', [trace], layout, {responsive: true});
        }

        // 更新CDF图表
        function updateCDFChart() {
            const maxK = Math.max(20, Math.ceil(currentLambda + 4 * Math.sqrt(currentLambda)));
            const k_values = Array.from({length: maxK + 1}, (_, i) => i);
            const cdf_values = k_values.map(k => poissonCDF(k, currentLambda));

            const trace = {
                x: k_values,
                y: cdf_values,
                type: 'scatter',
                mode: 'lines+markers',
                name: `λ = ${currentLambda}`,
                line: {
                    color: 'rgba(118, 75, 162, 0.8)',
                    width: 3
                },
                marker: {
                    color: 'rgba(118, 75, 162, 1)',
                    size: 6
                }
            };

            const layout = {
                title: {
                    text: `泊松分布 CDF (λ = ${currentLambda})`,
                    font: { size: 16 }
                },
                xaxis: {
                    title: 'k (事件发生次数)',
                    showgrid: true,
                    gridcolor: 'rgba(0,0,0,0.1)'
                },
                yaxis: {
                    title: 'P(X ≤ k)',
                    showgrid: true,
                    gridcolor: 'rgba(0,0,0,0.1)'
                },
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                font: { family: 'Segoe UI, sans-serif' }
            };

            Plotly.newPlot('cdfChart', [trace], layout, {responsive: true});
        }

        // 更新对比图表
        function updateComparisonCharts() {
            const lambdaValues = [0.5, 1.0, 3.0, 5.0, 10.0];
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7'];
            
            // PMF对比
            const maxK = 25;
            const k_values = Array.from({length: maxK + 1}, (_, i) => i);
            
            const pmfTraces = lambdaValues.map((lambda, index) => ({
                x: k_values,
                y: k_values.map(k => poissonPMF(k, lambda)),
                type: 'scatter',
                mode: 'lines+markers',
                name: `λ = ${lambda}`,
                line: { color: colors[index], width: 2 },
                marker: { color: colors[index], size: 4 }
            }));

            const pmfLayout = {
                title: { text: '不同 λ 值的泊松分布 PMF 对比', font: { size: 16 } },
                xaxis: { title: 'k', showgrid: true, gridcolor: 'rgba(0,0,0,0.1)' },
                yaxis: { title: 'P(X = k)', showgrid: true, gridcolor: 'rgba(0,0,0,0.1)' },
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                font: { family: 'Segoe UI, sans-serif' }
            };

            Plotly.newPlot('pmfComparisonChart', pmfTraces, pmfLayout, {responsive: true});

            // CDF对比
            const cdfTraces = lambdaValues.map((lambda, index) => ({
                x: k_values,
                y: k_values.map(k => poissonCDF(k, lambda)),
                type: 'scatter',
                mode: 'lines',
                name: `λ = ${lambda}`,
                line: { color: colors[index], width: 3 }
            }));

            const cdfLayout = {
                title: { text: '不同 λ 值的泊松分布 CDF 对比', font: { size: 16 } },
                xaxis: { title: 'k', showgrid: true, gridcolor: 'rgba(0,0,0,0.1)' },
                yaxis: { title: 'P(X ≤ k)', showgrid: true, gridcolor: 'rgba(0,0,0,0.1)' },
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                font: { family: 'Segoe UI, sans-serif' }
            };

            Plotly.newPlot('cdfComparisonChart', cdfTraces, cdfLayout, {responsive: true});
        }

        // 更新对比表格
        function updateComparisonTable() {
            const lambdaValues = [0.5, 1.0, 2.0, 3.0, 5.0, 10.0];
            const tbody = document.getElementById('comparisonTableBody');
            
            tbody.innerHTML = lambdaValues.map(lambda => {
                const mean = lambda;
                const variance = lambda;
                const std = Math.sqrt(variance);
                const mode = Math.floor(lambda);
                const skewness = 1 / Math.sqrt(lambda);
                
                return `
                    <tr>
                        <td>${lambda}</td>
                        <td>${mean.toFixed(2)}</td>
                        <td>${variance.toFixed(2)}</td>
                        <td>${std.toFixed(2)}</td>
                        <td>${mode}</td>
                        <td>${skewness.toFixed(3)}</td>
                    </tr>
                `;
            }).join('');
        }
    </script>
</body>
</html>